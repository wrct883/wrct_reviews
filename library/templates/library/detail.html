{% extends "base.html" %}
{% load library_filters %}
{% block title %}wrct database : {{ object }}{% endblock %}

{% block content %}
<main>
  <h1 class='large'>{{ table }}: {{ object }}</h1>
  <a href='{% url "library:index" %}'>&#8592; back to home</a>
  {% for field in fields %}
  <p class='subtitle'><b>{{ object|verbose_name:field }}:</b> {{ object|lookup:field }}</p>
  {% endfor %}

  {% if table == "Album" %}
  <h1>Reviews</h1>
  {% if not object.review_set.all %}
  <p>There are no reviews for this album yet. Be the first to review it!</p>
  {% endif %}
  <a href="#">
    <button class="outline mb1">
      Review this album <b class='icon'>+</b>
    </button>
  </a>
  {% if object.review_set.all %}
  {# TODO: make this table an include #}
  <table class='list-table vertical-align-top'>
  <tr>
    <th>user</th>
    <th>review</th>
  </tr>
  {% for review in object.review_set.all %}
  <tr>
    <td>{{ review.user.name }}</td>
    <td>{{ review.review }}</td>
  </tr>
  {% endfor %}
  </table>
  {% endif %}
  {% elif table == "Label" or table == "Artist" %}
  <h1>Related Albums</h1>
  {% if object.album_set.all %}
  {# TODO: make this table an include #}
  <table class='list-table vertical-align-top'>
  <tr>
    <th>album</th>
    <th>artist</th>
  </tr>
  {% for album in object.album_set.all %}
  <tr>
    <td>{{ album.album }}</td>
    <td>{{ album.artist }}</td>
  </tr>
  {% endfor %}
  </table>
  {% endif %}
  {% endif %}
</main>
{% endblock %}


